/* empty css              */function y(){var t=document.querySelectorAll(".publication"),e=t.length;t.forEach(function(n,a){var o=e-a,i=n.querySelector("h3");i&&(i.textContent=o+". "+i.textContent)})}function f(){document.body.scrollTop>20||document.documentElement.scrollTop>20?document.getElementById("backToTopBtn").style.display="block":document.getElementById("backToTopBtn").style.display="none"}function w(t){var e=document.body,n=document.getElementById("overlay");if(t.classList.contains("enlarged"))t.classList.remove("enlarged"),t.style.transform="",n.style.display="none",e.style.overflow="auto",document.querySelector(".fa-arrow-left").style.display="none",document.querySelector(".fa-arrow-right").style.display="none";else{var a=h(t);t.style.transform="translate(-50%, -50%) scale("+a+")",t.classList.add("enlarged"),n.style.display="block",e.style.overflow="hidden",document.querySelector(".fa-arrow-left").style.display="block",document.querySelector(".fa-arrow-right").style.display="block"}}function h(t){var e=window.innerWidth,n=t.offsetWidth,a=e/n;return a=Math.min(a,.8),a}function m(t){var e=Array.from(document.querySelectorAll(".enlarge_img")),n=document.querySelector(".enlarge_img.enlarged"),a=e.indexOf(n);if(n){n.classList.remove("enlarged"),n.style.transform="",t==="next"?a=(a+1)%e.length:t==="prev"&&(a=(a-1+e.length)%e.length);var o=e[a],i=h(o);o.style.transform="translate(-50%, -50%) scale("+i+")",o.classList.add("enlarged"),o.style.display="block"}}function v(){var t=document.querySelector(".fa-arrow-left"),e=document.querySelector(".fa-arrow-right");t&&(t.style.display="none"),e&&(e.style.display="none")}function g(){var t=document.getElementById("shareModal");t.style.display=t.style.display==="block"?"none":"block"}function _(){var t=document.getElementById("downloadModal");t.style.display="block"}function u(){var t=document.getElementById("downloadModal");t.style.display="none"}function p(t){var e=document.getElementById(t);e.select(),document.execCommand("copy")}document.addEventListener("DOMContentLoaded",function(){I(),y(),L(),x(),b(),v(),E();var t=document.getElementById("share_icon"),e=document.querySelector(".modal .close"),n=window.location.href,a=document.getElementById("shareLink");a.value=n,window.addEventListener("click",function(l){var d=document.getElementById("shareModal");l.target===d&&g()}),t.addEventListener("click",g),e.addEventListener("click",g);var o=document.getElementById("download_icon"),i=document.querySelector(".download-close"),r=document.querySelectorAll(".attribution textarea");o.addEventListener("click",_),i.addEventListener("click",u),window.addEventListener("click",function(l){var d=document.getElementById("downloadModal");l.target===d&&u()}),r.forEach(function(l){l.addEventListener("click",function(){p(this.id)})})});function I(){var t=document.querySelectorAll(".publications");t.forEach(function(e){e.style.display="block",e.previousElementSibling.textContent="-"+e.previousElementSibling.textContent.slice(2)})}function L(){var t=document.querySelectorAll(".subnav_dropbtn"),e=document.querySelector(".menubar"),n=document.querySelector(".navlinks"),a=document.querySelectorAll(".subnav");t.forEach(function(i){i.addEventListener("click",function(){var r=this.nextElementSibling,l=window.getComputedStyle(r).display==="none";r.style.display=l?"block":"none",r.style.overflowY=l?"auto":"none"})}),e&&n?(e.addEventListener("click",function(){n.classList.toggle("active"),document.body.style.overflowY=n.classList.contains("active")?"hidden":"auto"}),window.addEventListener("resize",function(){window.innerWidth>600&&(n.classList.remove("active"),document.body.style.overflowY="auto",a.forEach(function(i){i.classList.remove("active");var r=i.querySelector(".dropdown-content");r&&(r.style.display="none")}))})):console.error("Menubar or navbar links not found"),window.onscroll=f;var o=document.getElementById("backToTopBtn");o&&o.addEventListener("click",function(){document.body.scrollTop=0,document.documentElement.scrollTop=0})}function E(){var t=document.querySelectorAll(".subnav_dropbtn");t.forEach(function(e){e.addEventListener("click",function(){if(window.innerWidth>600){var n=this.nextElementSibling,a=this.classList.contains("active");t.forEach(function(o){var i=o.nextElementSibling;i.style.display="none",o.classList.remove("active")}),a||(n.style.display="block",this.classList.add("active"))}})})}function x(){var t=document.querySelectorAll(".enlarge_img, video");t.forEach(function(e){e.addEventListener("click",function(){w(this)})})}function b(){var t=document.querySelector(".left-arrow"),e=document.querySelector(".right-arrow");t&&e&&(t.addEventListener("click",function(n){n.stopPropagation(),m("prev")}),e.addEventListener("click",function(n){n.stopPropagation(),m("next")})),document.addEventListener("keydown",function(n){var a=document.getElementById("overlay");a&&a.style.display=="block"&&(n.key==="ArrowLeft"&&t?(m("prev"),t.classList.add("active"),setTimeout(function(){t.classList.remove("active")},150),n.preventDefault()):n.key==="ArrowRight"&&e&&(m("next"),e.classList.add("active"),setTimeout(function(){e.classList.remove("active")},150),n.preventDefault()))})}window.addEventListener("DOMContentLoaded",()=>{fetch("template.html").then(t=>{if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return t.text()}).then(t=>{const n=new DOMParser().parseFromString(t,"text/html"),a=n.querySelector(".footer").outerHTML,o=n.querySelector(".legends").outerHTML,i=n.querySelector(".TermOfUse").outerHTML;document.getElementById("footer-placeholder").innerHTML=a,document.getElementById("legends-placeholder").innerHTML=o,document.getElementById("term-placeholder").innerHTML=i;const r=document.getElementsByClassName("current-year");for(let l=0;l<r.length;l++)r[l].textContent=new Date().getFullYear()}).catch(t=>{console.error("Error fetching the template:",t)})});class s{constructor(e,n,a,o,i){this.viewer=document.getElementById(e),this.fusedImage=document.getElementById(n),this.infoOverlay=document.getElementById(a),this.originalImagePath=o,this.alternateImagePath=i,this.imagePath=o,this.imageIndex=0,this.totalImages=0}updateImagePath(e){console.log(`Updating path for ${this.viewer.id} to: ${e}`),this.imagePath=e,this.updateImage()}async findTotalImages(){let e=!0,n=0;for(;e;){const a=this.getImageUrl(n);e=await this.imageExists(a),e&&n++}this.totalImages=n,this.imageIndex=Math.floor((this.totalImages-1)/2),this.updateImage()}downloadImage(){console.log(this.imageIndex);const e=this.getImageUrl(this.imageIndex),n=document.createElement("a");n.href=e,n.download=`image_${String(this.imageIndex).padStart(5,"0")}.jpg`,document.body.appendChild(n),n.click(),document.body.removeChild(n)}setupDownloadButton(){const e=document.getElementById("downloadBtn");e.onclick=()=>{this.downloadImage()}}init(){this.findTotalImages(),this.addEventListeners(),this.setupDownloadButton();const e=document.getElementById("myRange");e&&(e.value=Math.floor((this.totalImages-1)/2),this.updateImageIndex())}addEventListeners(){const e=document.querySelector(".fusedimage_style"),n=document.body,a=document.getElementById("myRange");window.addEventListener("wheel",o=>{const i=e.getBoundingClientRect();o.clientX>=i.left&&o.clientX<=i.right&&o.clientY>=i.top&&o.clientY<=i.bottom?(o.preventDefault(),n.style.overflow="hidden",o.deltaY<0?this.imageIndex=Math.min(this.imageIndex+1,this.totalImages-1):this.imageIndex=Math.max(this.imageIndex-1,0),this.updateImage()):n.style.overflow=""}),window.addEventListener("keydown",o=>{o.preventDefault(),o.key==="ArrowRight"||o.key==="ArrowDown"?this.imageIndex=Math.min(this.imageIndex+1,this.totalImages-1):(o.key==="ArrowLeft"||o.key==="ArrowUp")&&(this.imageIndex=Math.max(this.imageIndex-1,0)),this.updateImage()}),window.addEventListener("mousemove",o=>{const i=e.getBoundingClientRect();(o.clientX<i.left||o.clientX>i.right||o.clientY<i.top||o.clientY>i.bottom)&&(n.style.overflow="")}),a&&a.addEventListener("input",()=>{this.imageIndex=parseInt(a.value),this.imageIndex=Math.max(this.imageIndex,0),this.updateImage()})}imageExists(e){return new Promise(n=>{const a=new Image;a.onload=()=>n(!0),a.onerror=()=>n(!1),a.src=e})}getImageUrl(e){return`${this.imagePath}/image_${String(e).padStart(5,"0")}.jpg`}updateImage(){this.fusedImage&&(this.fusedImage.src=this.getImageUrl(this.imageIndex),this.updateImageIndex())}updateImageIndex(){const e=document.getElementById("myRange");e&&this.infoOverlay&&(e.max=this.totalImages-1,e.value=this.imageIndex,this.infoOverlay.innerHTML=`${this.imageIndex+1}/${this.totalImages}`)}}class k{constructor(e,n){if(this.switchContainer=document.getElementById(e),this.legendsWrapper=document.getElementById("legends-wrapper"),this.viewer=n,this.isOriginal=!0,this.switchContainer){const a=this.switchContainer.querySelector('input[type="checkbox"]');a?(a.checked=!this.isOriginal,a.addEventListener("change",()=>{console.log("label toggled"),this.isOriginal=!a.checked;const o=this.isOriginal?this.viewer.originalImagePath:this.viewer.alternateImagePath;this.viewer.updateImagePath(o),this.legendsWrapper&&(this.legendsWrapper.classList.contains("active")?(this.legendsWrapper.classList.remove("active"),this.legendsWrapper.style.display="none"):(this.legendsWrapper.classList.add("active"),this.legendsWrapper.style.display="block"))})):console.error("Checkbox element not found in container:",e)}else console.error("SwitchContainer element not found:",e)}}function c(t,e){return document.getElementById(t)?new k(t,e):null}document.addEventListener("DOMContentLoaded",()=>{const t=new s("c1_coronalViewer","c1_coronalImage","c1_coronalinfoOverlay","images/03_06_20230206(L)/coronal_FOV(25)/original","images/03_06_20230206(L)/coronal_FOV(25)/annotated"),e=new s("c2_coronalViewer","c2_coronalImage","c2_coronalinfoOverlay","images/03_23_20230309(R)/coronal_FOV(25)/original","images/03_23_20230309(R)/coronal_FOV(25)/annotated"),n=new s("c3_coronalViewer","c3_coronalImage","c3_coronalinfoOverlay","images/03_37_20230322(L)/coronal_FOV(25)/original","images/03_37_20230322(L)/coronal_FOV(25)/annotated"),a=new s("c1_axialViewer","c1_axialImage","c1_axialinfoOverlay","images/03_06_20230206(L)/axial_FOV(25)/original","images/03_06_20230206(L)/axial_FOV(25)/annotated"),o=new s("c2_axialViewer","c2_axialImage","c2_axialinfoOverlay","images/03_23_20230309(R)/axial_FOV(25)/original","images/03_23_20230309(R)/axial_FOV(25)/annotated"),i=new s("c3_axialViewer","c3_axialImage","c3_axialinfoOverlay","images/03_37_20230322(L)/axial_FOV(25)/original","images/03_37_20230322(L)/axial_FOV(25)/annotated"),r=new s("c1_sagittalViewer","c1_sagittalImage","c1_sagittalinfoOverlay","images/03_06_20230206(L)/sagittal_FOV(25)/original","images/03_06_20230206(L)/sagittal_FOV(25)/annotated"),l=new s("c2_sagittalViewer","c2_sagittalImage","c2_sagittalinfoOverlay","images/03_23_20230309(R)/sagittal_FOV(25)/original","images/03_23_20230309(R)/sagittal_FOV(25)/annotated"),d=new s("c3_sagittalViewer","c3_sagittalImage","c3_sagittalinfoOverlay","images/03_37_20230322(L)/sagittal_FOV(25)/original","images/03_37_20230322(L)/sagittal_FOV(25)/annotated");t.init(),e.init(),n.init(),a.init(),o.init(),i.init(),r.init(),l.init(),d.init(),c("c1_coronal_switchButton",t),c("c2_coronal_switchButton",e),c("c3_coronal_switchButton",n),c("c1_axial_switchButton",a),c("c2_axial_switchButton",o),c("c3_axial_switchButton",i),c("c1_sagittal_switchButton",r),c("c2_sagittal_switchButton",l),c("c3_sagittal_switchButton",d)});
